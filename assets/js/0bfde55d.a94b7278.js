"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([[4536],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=u(a),p=o,h=c["".concat(l,".").concat(p)]||c[p]||m[p]||r;return a?n.createElement(h,i(i({ref:t},d),{},{components:a})):n.createElement(h,i({ref:t},d))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:o,i[1]=s;for(var u=2;u<r;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},18679:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),o=a(86010);const r={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,i),hidden:a},t)}},73992:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(87462),o=a(67294),r=a(86010),i=a(72957),s=a(16550),l=a(75238),u=a(33609),d=a(92560);function c(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:o}}=e;return{value:t,label:a,attributes:n,default:o}}))}function m(e){const{values:t,children:a}=e;return(0,o.useMemo)((()=>{const e=t??c(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,l._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})}),[r,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,r=m(e),[i,s]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r}))),[l,u]=h({queryString:a,groupId:n}),[c,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,r]=(0,d.Nk)(a);return[n,(0,o.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:n}),y=(()=>{const e=l??c;return p({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var y=a(51048);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:a,selectedValue:s,selectValue:l,tabValues:u}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),m=e=>{const t=e.currentTarget,a=d.indexOf(t),n=u[a].value;n!==s&&(c(t),l(n))},p=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;t=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;t=d[a]??d[d.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:i}=e;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>d.push(e),onKeyDown:p,onClick:m},i,{className:(0,r.Z)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":s===t})}),a??t)})))}function k(e){let{lazy:t,children:a,selectedValue:n}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===n));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=f(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},o.createElement(g,(0,n.Z)({},e,t)),o.createElement(k,(0,n.Z)({},e,t)))}function w(e){const t=(0,y.Z)();return o.createElement(v,(0,n.Z)({key:String(t)},e))}},24918:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>c});var n=a(87462),o=(a(67294),a(3905)),r=a(73992),i=a(18679);const s={title:"Domains",template:"docs",taxonomy:{category:"docs"},routes:{default:"/domains"},"shortcode-ui":{theme:{tabs:"lite"}}},l=void 0,u={unversionedId:"administer/admin_guide/domains/domains",id:"administer/admin_guide/domains/domains",title:"Domains",description:"DNS (Domain Name System) is a system that allows computers from around the world to translate human-readable domain names (such as yolo.com) to machine-understandable addresses called IP addresses (such as 11.22.33.44). For this translation (and other features) to work, you must carefully configure DNS records.",source:"@site/docs/02.administer/15.admin_guide/25.domains/25.domains.mdx",sourceDirName:"02.administer/15.admin_guide/25.domains",slug:"/administer/admin_guide/domains/",permalink:"/yunodocusaurus/docs/administer/admin_guide/domains/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02.administer/15.admin_guide/25.domains/25.domains.mdx",tags:[],version:"current",sidebarPosition:25,frontMatter:{title:"Domains",template:"docs",taxonomy:{category:"docs"},routes:{default:"/domains"},"shortcode-ui":{theme:{tabs:"lite"}}},sidebar:"docsSidebar",previous:{title:"Users groups and permissions",permalink:"/yunodocusaurus/docs/administer/admin_guide/users/groups_and_permissions"},next:{title:"Certificate",permalink:"/yunodocusaurus/docs/administer/admin_guide/domains/certificate"}},d={},c=[{value:"3 types of domains",id:"3-types-of-domains",level:2},{value:"The main domain",id:"the-main-domain",level:2},{value:"Subdomains",id:"subdomains",level:2},{value:"About Non-latin characters",id:"about-non-latin-characters",level:2},{value:"SSL/HTTPS certificates",id:"sslhttps-certificates",level:2}],m={toc:c},p="wrapper";function h(e){let{components:t,...s}=e;return(0,o.kt)(p,(0,n.Z)({},m,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"DNS (Domain Name System) is a system that allows computers from around the world to translate human-readable domain names (such as ",(0,o.kt)("inlineCode",{parentName:"p"},"yolo.com"),") to machine-understandable addresses called IP addresses (such as ",(0,o.kt)("inlineCode",{parentName:"p"},"11.22.33.44"),"). For this translation (and other features) to work, you must carefully configure DNS records."),(0,o.kt)("p",null,"YunoHost allows you to manage and serve several domains on the same server with the same public ip. For instance, you can host a blog and Nextcloud on a first domain ",(0,o.kt)("inlineCode",{parentName:"p"},"yolo.com"),", and a web mail client on a second domain ",(0,o.kt)("inlineCode",{parentName:"p"},"swag.nohost.me"),". Each domain is automatically configured to handle web services, mail services and XMPP services."),(0,o.kt)("p",null,"Domains can be managed in the 'Domain' section of the webadmin, or through the ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost domain")," category of the command line."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"A screenshot of the webadmin domain interface with an &quot;Add domain&quot; button and a list of domains",src:a(86804).Z,width:"768",height:"613"})),(0,o.kt)("h2",{id:"3-types-of-domains"},"3 types of domains"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"nohost",label:"Yunohost's domains (the free and easy way)",mdxType:"TabItem"},(0,o.kt)("p",null,"In order to make self-hosting as accessible as possible, the YunoHost Project provides a ",(0,o.kt)("em",{parentName:"p"},"free")," and ",(0,o.kt)("em",{parentName:"p"},"automatically configured")," domain name service. By using this service, you won't have to ",(0,o.kt)("a",{parentName:"p",href:"/dns_config"},"configure DNS records")," yourself, which can be tedious and technical."),(0,o.kt)("p",null,"The following (sub)domains are offered:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"whateveryouwant.nohost.me"),";"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"whateveryouwant.noho.st"),";"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"whateveryouwant.ynh.fr"),".")),(0,o.kt)("p",null,"In more, YunoHost uses an integrated dynamic DNS mechanism, so your server can stay reachable even if your public IP change."),(0,o.kt)("p",null,"To get one of this domain you simply need to choose ",(0,o.kt)("inlineCode",{parentName:"p"},"I don't have a domaine name\u2026")," during the initial configuration (postinstall) or on the ",(0,o.kt)("inlineCode",{parentName:"p"},"Add domain")," page."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Here a screenshot of the &quot;Add domain&quot; page where you can choose &quot;I don&#39;t have a domain name&quot;",src:a(39513).Z,width:"768",height:"613"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"To limit resources costs and abuses, each instance may only have one of these domains setup at any given time, however you can add as many sub-domains of it as you wish. For example, if you choose ",(0,o.kt)("inlineCode",{parentName:"p"},"example.noho.st")," you can later add the domains ",(0,o.kt)("inlineCode",{parentName:"p"},"video.example.noho.st")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"www.example.ynh.noho.st")," or any other sub-domain you may need. In this case you need to select ",(0,o.kt)("inlineCode",{parentName:"p"},"I already have a domain name"),".")),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"You have to keep a backup archive of the config file of your server if you want to be able to restore your server with this domain name without ",(0,o.kt)("a",{parentName:"p",href:"https://forum.yunohost.org/t/nohost-domain-recovery-suppression-de-domaine-en-nohost-me-noho-st-et-ynh-fr/442"},"asking help of YunoHost team to recover access on it"),".")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/dns_nohost_me"},"More information on those domains"))),(0,o.kt)(i.Z,{value:"own",label:"Your own domains",mdxType:"TabItem"},(0,o.kt)("p",null,"Having your own domain brings several advantages:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"more control and autonomy"),(0,o.kt)("li",{parentName:"ul"},"simpler domain name (for example directly in .net or .org)")),(0,o.kt)("p",null,"However, you have to pay for it each year (about 15\u20ac/year) and you have to do some extra configuration to ",(0,o.kt)("a",{parentName:"p",href:"/dns_config"},"setup a correct DNS zone"),". Our diagnosis tool can trigger alert to help you to do this configuration."),(0,o.kt)("p",null,'If you already have your own domain, you can simply click "I already have a domain name\u2026". If you don\'t, in order to simplify and automate the DNS configuration, we suggest you to buy it from a ',(0,o.kt)("a",{parentName:"p",href:"/providers/registrar"},"registrar whose API is supported by YunoHost"),". "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Here a screenshot of the &quot;Add domain&quot; page where you can choose &quot;I already have a domain name&quot;",src:a(48557).Z,width:"768",height:"613"})),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/dns_config"},"Know more on DNS zone configuration"))),(0,o.kt)(i.Z,{value:"local",label:"Local domains (only reachable in your local network)",mdxType:"TabItem"},(0,o.kt)("p",null,"Starting from YunoHost v4.3, domains ending by ",(0,o.kt)("inlineCode",{parentName:"p"},".local")," are fully supported, in addition to the default ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost.local"),".\nThey do not use the DNS protocol, but the mDNS one (also known as Zeroconf, Bonjour), which allows them to be published with no specific configuration but exclusively on your local network or VPN.\nTheir use is this especially suitable when you do not need your apps to be available on the Internet."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Here a screenshot of the &quot;Add domain&quot; page where you can choose &quot;I already have a domain name&quot; and setup your domain ending by .local",src:a(57736).Z,width:"768",height:"613"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"mDNS protocol does not allow for subdomains to be created. So ",(0,o.kt)("inlineCode",{parentName:"p"},"domain.local")," will work, while ",(0,o.kt)("inlineCode",{parentName:"p"},"sub.domain.local")," is not possible.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Yunomdns")," service takes care of publishing your ",(0,o.kt)("inlineCode",{parentName:"p"},".local")," domains on your network.\nIt has a configuration file, ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/yunohost/mdns.yml"),", which allows you to choose which domains are published, and on which network interfaces.\nThis file is automatically regenerated whenever you add or delete a ",(0,o.kt)("inlineCode",{parentName:"p"},".local")," domain."),(0,o.kt)("p",null,"The service will always try to publish ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost.local"),". If you have multiple YunoHost servers on your network, try ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost-2.local"),", and so on.\nThe number may change depending on which server starts first, so do not rely on it to use actual apps and create your own domains."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Unfortunately, Android devices before version 12 (released in 2021) do not seem to be listening to mDNS protocol.\nTo be able to reach ",(0,o.kt)("inlineCode",{parentName:"p"},".local")," domains on your Android devices, you will have to add in their DNS settings your YunoHost server's local IP address.")))),(0,o.kt)("h2",{id:"the-main-domain"},"The main domain"),(0,o.kt)("p",null,"The domain chosen during the initial configuration (post-install) is defined as the main (or default) domain of the server : this is where ",(0,o.kt)("a",{parentName:"p",href:"/users"},"the user portal (SSO)")," will be available. The main domain can later be changed through the web admin in Domains > (the domain) > Set default, or with the command line ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost tools maindomain"),"."),(0,o.kt)("p",null,"More technically, the main domain is also used as hostname by SMTP protocol to send email (EHLO) and determine which value should be configured in the reverse DNS bind to your public IP. If this 2 values are mis-configured, the diagnosis tool will trigger you an alert."),(0,o.kt)("h2",{id:"subdomains"},"Subdomains"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Bear in mind, YunoHost considers domains and their subdomains independently.\nYou ",(0,o.kt)("strong",{parentName:"p"},"need")," to register all the domains and subdomains you want to use.")),(0,o.kt)("h2",{id:"about-non-latin-characters"},"About Non-latin characters"),(0,o.kt)("p",null,"If your domain has special, non-latin characters, it will be transformed by YunoHost into its ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Internationalized_domain_name"},"internationalized version")," through ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Punycode"},"Punycode"),". So when you use the command line, you have to use the punycode format return for example by ",(0,o.kt)("inlineCode",{parentName:"p"},"yunohost domain list"),"."),(0,o.kt)("h2",{id:"sslhttps-certificates"},"SSL/HTTPS certificates"),(0,o.kt)("p",null,"Another important aspect of domain configuration is the SSL/HTTPS certificate. YunoHost is integrated with Let's Encrypt, so once your server is correctly reachable from anybody on the internet through the domain name, the administrator can request a Let's Encrypt certificate. See the documentation about ",(0,o.kt)("a",{parentName:"p",href:"/certificate"},"certificates")," for more information."))}h.isMDXComponent=!0},86804:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/webadmin_domain-24b9df6a504edcebb82ea5377103e7c7.png"},57736:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/webadmin_domain_local-005e3765ab947a6af7b0c78c78eb8e75.png"},48557:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/webadmin_domain_owndomain-9c72ca5915a3f19531863c74bb623a07.png"},39513:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/webadmin_dyndns-9f3fc29e81ad672ad134499c2122fac4.png"}}]);